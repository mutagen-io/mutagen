<!doctype html><html lang=en class=h-100><head><title>Daemon | Mutagen</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" href=/img/favicon.png><link rel=apple-touch-icon sizes=114x114 href=/img/apple-touch-114.png><link rel=apple-touch-icon sizes=144x144 href=/img/apple-touch-144.png><script src=/js/bundle.18ed5611c09fa9cba6a2f11efb8ae4e4f57a0e7289515aa8e3ec64449fd0cdd7.js integrity="sha256-GO1WEcCfqcumovEe&#43;4rk5PV6DnKJUVqo4&#43;xkRJ/Qzdc="></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mukta|Roboto:300,400|Roboto+Mono"><link rel=stylesheet href=/css/bundle.952c27c90e48b6b24083f9bf60cbcd560d7e9f210dd98fec01fa37e24e74242d.css integrity="sha256-lSwnyQ5ItrJAg/m/YMvNVg1&#43;nyEN2Y/sAfo34k50JC0="></head><body class="d-flex flex-column h-100"><div class=flex-shrink-0><nav class="navbar navbar-expand-md navbar-light py-0"><div class=container><a class="navbar-brand mutagen-brand" href=/><img class="d-inline-block align-top logo" src=/img/logo.svg alt="Mutagen logo">
Mutagen</a>
<button class="navbar-toggler mr-2" type=button data-toggle=collapse data-target=#navigation-content aria-controls=navigation-content aria-expanded=false aria-label="Toggle navigation" style=border:none>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item mr-3"><a class="nav-link text-dark" href=/documentation/introduction/installation>Install</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=/documentation>Documentation</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=https://spectrum.chat/mutagen target=_blank>Spectrum</a></li><li class="nav-item mr-3"><a class="nav-link text-dark" href=https://twitter.com/mutagen_io target=_blank>Twitter</a></li><li class=nav-item><a class="nav-link text-dark" href=https://github.com/mutagen-io/mutagen target=_blank>GitHub</a></li></ul></div></div></nav><nav class="navbar navbar-expand-md navbar-dark bg-dark py-0"><div class=container><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=introduction-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Introduction</a><div class=dropdown-menu aria-labelledby=introduction-dropdown><a class=dropdown-item href=/documentation/introduction>Overview</a>
<a class=dropdown-item href=/documentation/introduction/installation>Installation</a>
<a class=dropdown-item href=/documentation/introduction/getting-started>Getting started</a>
<a class=dropdown-item href=/documentation/introduction/daemon>Daemon</a>
<a class=dropdown-item href=/documentation/introduction/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/introduction/names-labels-identifiers>Names, labels, and identifiers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=transports-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Transports</a><div class=dropdown-menu aria-labelledby=transports-dropdown><a class=dropdown-item href=/documentation/transports>Overview</a>
<a class=dropdown-item href=/documentation/transports/local>Local</a>
<a class=dropdown-item href=/documentation/transports/ssh>SSH</a>
<a class=dropdown-item href=/documentation/transports/docker>Docker<sup>®</sup> containers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=synchronization-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Synchronization</a><div class=dropdown-menu aria-labelledby=synchronization-dropdown><a class=dropdown-item href=/documentation/synchronization>Overview</a>
<a class=dropdown-item href=/documentation/synchronization/ignores>Ignores</a>
<a class=dropdown-item href=/documentation/synchronization/version-control-systems>Version control systems</a>
<a class=dropdown-item href=/documentation/synchronization/permissions>Permissions</a>
<a class=dropdown-item href=/documentation/synchronization/symbolic-links>Symbolic links</a>
<a class=dropdown-item href=/documentation/synchronization/watching>Watching</a>
<a class=dropdown-item href=/documentation/synchronization/probing-and-scanning>Probing and scanning</a>
<a class=dropdown-item href=/documentation/synchronization/staging>Staging</a>
<a class=dropdown-item href=/documentation/synchronization/size-limits>Size limits</a>
<a class=dropdown-item href=/documentation/synchronization/safety-mechanisms>Safety mechanisms</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=forwarding-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Forwarding</a><div class=dropdown-menu aria-labelledby=forwarding-dropdown><a class=dropdown-item href=/documentation/forwarding>Overview</a>
<a class=dropdown-item href=/documentation/forwarding/unix-domain-sockets>Unix domain sockets</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=orchestration-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Orchestration</a><div class=dropdown-menu aria-labelledby=orchestration-dropdown><a class=dropdown-item href=/documentation/orchestration>Overview</a>
<a class=dropdown-item href=/documentation/orchestration/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/orchestration/example>Example</a></div></li></ul></div></div></nav><div class="container my-5"><div class=row><div class="d-none d-lg-block col-lg-3"><div class="sticky-top padded-sticky-top"><nav id=TableOfContents><ul><li><a href=#daemon>Daemon</a><ul><li><a href=#lifecycle>Lifecycle</a><ul><li><a href=#automatic-management>Automatic management</a></li><li><a href=#manual-management>Manual management</a></li><li><a href=#system-management>System management</a></li></ul></li><li><a href=#upgrading>Upgrading</a></li><li><a href=#embedding>Embedding</a></li></ul></li></ul></nav></div></div><div id=content class="col-md-12 col-lg-9 mb-3"><h1 id=daemon>Daemon</h1><p>At the core of Mutagen&rsquo;s architecture is the Mutagen daemon. The Mutagen daemon
is a per-user process that runs in the background, hosting and managing
Mutagen&rsquo;s synchronization and forwarding sessions. All of Mutagen&rsquo;s session
management commands actually dispatch their operations to the daemon and simply
output its feedback. Although it&rsquo;s not a user-facing component, understanding
the behavior and lifecycle of the daemon is critical to using Mutagen
effectively.</p><h2 id=lifecycle>Lifecycle</h2><p>The daemon is designed to operate on a per-user basis. Only a single instance of
the daemon is allowed to run for a particular user at any given time. The
lifecycle of this instance can be managed in three different ways:
automatically, manually, or by the system. All three of these mechanisms can be
used in conjunction with one another (e.g. you can manually stop a daemon that
was automatically started).</p><h3 id=automatic-management>Automatic management</h3><p>If it&rsquo;s not already running, the daemon will be started automatically when any
session management command is invoked. At system shutdown time, the daemon will
terminate gracefully. If you wish to disable automatic daemon startup, you can
set the environment variable <code>MUTAGEN_DISABLE_AUTOSTART=1</code>.</p><h3 id=manual-management>Manual management</h3><p>The daemon can be started manually using the <code>mutagen daemon start</code> command.
This command is fast and idempotent, so it can safely be added to your shell
initialization script (e.g. <code>.bashrc</code>, etc) if you want the daemon to start
automatically when you open a shell. The daemon can also be stopped manually
using the <code>mutagen daemon stop</code> command.</p><h3 id=system-management>System management</h3><p>If you wish to have the daemon start automatically without any intervention,
experimental support for registering the daemon to start automatically on login
is available for macOS and Windows via the <code>mutagen daemon register</code> command.</p><h2 id=upgrading>Upgrading</h2><p>The API that session management commands use to communicate with the daemon
isn&rsquo;t currently stable, so the daemon needs to be restarted when upgrading
Mutagen:</p><pre><code>$ mutagen daemon stop
$ mutagen daemon start
</code></pre><p>If you forget, don&rsquo;t worry, Mutagen will simply print a warning message the next
time you try to invoke a session management command.</p><h2 id=embedding>Embedding</h2><p>Experimental support is available for embedding Mutagen and its daemon into
other applications. There are two steps to this process: changing the Mutagen
data directory to create an isolated daemon instance and (optionally) hosting
the daemon process directly.</p><p>Mutagen&rsquo;s data directory stores session configurations, synchronization
archives, and more. It&rsquo;s also the location of the Mutagen daemon IPC endpoint
and lock. Its default location is <code>~/.mutagen</code>, but this can be changed by
setting the <code>MUTAGEN_DATA_DIRECTORY</code> environment variable. If specified at
daemon startup, this environment variable will tell the daemon to store its data
and IPC endpoint in an alternate location. The same environment variable can
then be used to tell session management commands where to find that isolated
daemon&rsquo;s IPC endpoint. This variable should be set to an absolute path.</p><p>If desired, the daemon can also be hosted by the embedding process by invoking
its entry point directly using the hidden <code>mutagen daemon run</code> command. Unlike
the <code>mutagen daemon start</code> command, this will avoid starting the daemon process
in the background. The child process can then be terminated directly by the
hosting process.</p></div></div></div></div><footer class="mt-auto bg-dark py-4"><div class=container><div class=row><div class="col-md-4 my-3"><h6 class="text-white font-weight-bold mb-1">© 2016 – 2019 Mutagen IO, Inc.</h6><span class=text-light>All rights reserved.</span><br><strong><a class=text-success href=mailto:hello@mutagen.io>hello@mutagen.io</a></strong></div><div class=col-md-8><div class=row><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Resources</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=/documentation>Documentation</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://groups.google.com/forum/#!forum/mutagen-announce>Announcements</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://github.com/mutagen-io/mutagen/blob/master/SECURITY.md>Security</a></li></ul></div><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Legal</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=/legal/licenses>Licenses</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=/legal/third-party-trademarks>Third-party trademarks</a></li></ul></div><div class="col-md-4 my-3"><h6 class="text-light text-uppercase font-weight-bold">Links</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-light" href=https://spectrum.chat/mutagen>Spectrum</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://twitter.com/mutagen_io>Twitter</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=https://github.com/mutagen-io/mutagen>GitHub</a></li><li class=nav-item><a class="nav-link px-0 text-light" href=#>Top of page ▲</a></li></ul></div></div></div></div></div></footer></body></html>