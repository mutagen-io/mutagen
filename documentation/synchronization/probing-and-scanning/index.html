<!doctype html><html lang=en class=h-100><head><title>Probing and scanning | Mutagen</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" href=/img/favicon.png><script src=/js/bundle.3aeab2414d60a7503e5e48309329f68fc244713a80665f3baba323d52f60b764.js integrity="sha256-OuqyQU1gp1A&#43;Xkgwkyn2j8JEcTqAZl87q6Mj1S9gt2Q="></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mukta|Roboto:300,400|Roboto+Mono"><link rel=stylesheet href=/scss/main.min.6cd9493828aaf9946db37459e87631b3e2fa26d368112903942cdcab8dcb259f.css integrity="sha256-bNlJOCiq&#43;ZRts3RZ6HYxs&#43;L6JtNoESkDlCzcq43LJZ8="></head><body class="d-flex flex-column h-100"><div class=flex-shrink-0><nav class="navbar navbar-expand-md navbar-light py-0"><div class=container><a class="navbar-brand mutagen-brand" href=/><img class="d-inline-block align-top logo" src=/img/logo.svg alt="Mutagen logo">
Mutagen</a>
<button class="navbar-toggler mr-2" type=button data-toggle=collapse data-target=#navigation-content aria-controls=navigation-content aria-expanded=false aria-label="Toggle navigation" style=border:none>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item mr-3"><a class=nav-link href=/documentation/introduction/installation>Install</a></li><li class="nav-item mr-3"><a class=nav-link href=/documentation>Documentation</a></li><li class="nav-item mr-3"><a class=nav-link href=https://spectrum.chat/mutagen target=_blank>Spectrum</a></li><li class="nav-item mr-3"><a class=nav-link href=https://twitter.com/mutagen_io target=_blank>Twitter</a></li><li class=nav-item><a class=nav-link href=https://github.com/mutagen-io/mutagen target=_blank>GitHub</a></li></ul></div></div></nav><nav class="navbar navbar-expand-md navbar-dark bg-dark py-0"><div class=container><div class="collapse navbar-collapse" id=navigation-content><ul class="navbar-nav ml-auto"><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=introduction-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Introduction</a><div class=dropdown-menu aria-labelledby=introduction-dropdown><a class=dropdown-item href=/documentation/introduction>Overview</a>
<a class=dropdown-item href=/documentation/introduction/installation>Installation</a>
<a class=dropdown-item href=/documentation/introduction/getting-started>Getting started</a>
<a class=dropdown-item href=/documentation/introduction/daemon>Daemon</a>
<a class=dropdown-item href=/documentation/introduction/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/introduction/names-labels-identifiers>Names, labels, and identifiers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=transports-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Transports</a><div class=dropdown-menu aria-labelledby=transports-dropdown><a class=dropdown-item href=/documentation/transports>Overview</a>
<a class=dropdown-item href=/documentation/transports/local>Local</a>
<a class=dropdown-item href=/documentation/transports/ssh>SSH</a>
<a class=dropdown-item href=/documentation/transports/docker>Docker<sup>®</sup> containers</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=synchronization-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Synchronization</a><div class=dropdown-menu aria-labelledby=synchronization-dropdown><a class=dropdown-item href=/documentation/synchronization>Overview</a>
<a class=dropdown-item href=/documentation/synchronization/ignores>Ignores</a>
<a class=dropdown-item href=/documentation/synchronization/version-control-systems>Version control systems</a>
<a class=dropdown-item href=/documentation/synchronization/permissions>Permissions</a>
<a class=dropdown-item href=/documentation/synchronization/symbolic-links>Symbolic links</a>
<a class=dropdown-item href=/documentation/synchronization/watching>Watching</a>
<a class=dropdown-item href=/documentation/synchronization/probing-and-scanning>Probing and scanning</a>
<a class=dropdown-item href=/documentation/synchronization/staging>Staging</a>
<a class=dropdown-item href=/documentation/synchronization/size-limits>Size limits</a>
<a class=dropdown-item href=/documentation/synchronization/safety-mechanisms>Safety mechanisms</a></div></li><li class="nav-item dropdown mr-1"><a class="nav-link dropdown-toggle" href=# id=forwarding-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Forwarding</a><div class=dropdown-menu aria-labelledby=forwarding-dropdown><a class=dropdown-item href=/documentation/forwarding>Overview</a>
<a class=dropdown-item href=/documentation/forwarding/unix-domain-sockets>Unix domain sockets</a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=orchestration-dropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Orchestration</a><div class=dropdown-menu aria-labelledby=orchestration-dropdown><a class=dropdown-item href=/documentation/orchestration>Overview</a>
<a class=dropdown-item href=/documentation/orchestration/configuration>Configuration</a>
<a class=dropdown-item href=/documentation/orchestration/example>Example</a></div></li></ul></div></div></nav><div class="container my-5"><div class=row><div class="d-none d-lg-block col-lg-3"><div class="sticky-top padded-sticky-top"><nav id=TableOfContents><ul><li><a href=#probing-and-scanning>Probing and scanning</a><ul><li><a href=#probing>Probing</a></li><li><a href=#scanning>Scanning</a></li></ul></li></ul></nav></div></div><div id=content class="col-md-12 col-lg-9 mb-3"><h1 id=probing-and-scanning>Probing and scanning</h1><p>On each synchronization cycle, Mutagen endpoints are probed for filesystem
behavior and scanned to create a snapshot of synchronization root contents. In
both cases, Mutagen can perform the operation in a variety of different ways.
While the default behavior will be satisfactory for the vast majority of users,
there are certain cases (outlined below) where users may wish to adjust
Mutagen&rsquo;s default behavior.</p><h2 id=probing>Probing</h2><p>Filesystem probing is used to determine certain filesystem behaviors that need
to be understood in order to correctly synchronize files between different
systems. In particular, Mutagen needs to know if a filesystem preserves POSIX
executability bits and whether or not it decomposes Unicode filesystem names.
Mutagen has two mechanisms for determining this information: it can either probe
the filesystem to determine the exact behavior or assume behavior based on the
platform.</p><p>When probing a filesystem, Mutagen first checks the filesystem type. Mutagen has
a conservative (but broadly applicable) database of filesystem types with
well-known behavior, allowing it to skip direct probing on most filesystems. For
filesystem types unknown to Mutagen or where behaviors are not well-defined,
Mutagen performs direct probing using temporary files. These temporary files
contain non-ASCII characters in their names and may cause problems for tools
using filesystem watching. In that case, it may be advantageous to tell Mutagen
to simply assume filesystem behavior based on the platform.</p><p>To configure filesystem probing behavior, Mutagen offers two different modes:</p><ul><li><strong><code>probe</code> (Default)</strong>: In this mode, Mutagen performs its default probing
using filesystem type checks and (if necessary) temporary probe files.</li><li><strong><code>assume</code></strong>: In this mode, Mutagen assumes filesystem behavior based on the
platform. This is less accurate but (very marginally) faster and less likely
to cause conflicts with other tools using filesystem watching.</li></ul><p>These modes can be specified on a per-session and/or per-endpoint basis by
passing the <code>--probe-mode=&lt;mode&gt;</code> or <code>--probe-mode-(alpha|beta)=&lt;mode&gt;</code> flag,
respectively, to the <code>mutagen sync create</code> command. These modes can be specified
on a default per-session basis by including the following configuration in
<code>~/.mutagen.yml</code>:</p><pre><code>sync:
  defaults:
    probeMode: &quot;&lt;mode&gt;&quot;
</code></pre><h2 id=scanning>Scanning</h2><p>Filesystem scanning is used to generate a snapshot of the synchronization root
on an endpoint for use as input to Mutagen&rsquo;s reconciliation algorithm. Mutagen
has two different modes for performing scans:</p><ul><li><strong><code>accelerated</code> (Default)</strong>: In this mode, Mutagen uses filesystem watching
information to avoid performing a full synchronization root re-scan. For
endpoints using recursive native watching, Mutagen tracks the files that have
changed since the last scan and only re-scans those files and their parent
directories. For systems using poll-based watching, Mutagen simply returns the
last scan generated by polling. For systems with watching disabled, Mutagen
simply falls back to a full scan.</li><li><strong><code>full</code></strong>: In this mode, Mutagen always performs a full synchronization root
re-scan. This is the most accurate option, though it comes with a performance
hit for very large synchronization roots.</li></ul><p>These modes can be specified on a per-session and/or per-endpoint basis by
passing the <code>--scan-mode=&lt;mode&gt;</code> or <code>--scan-mode-(alpha|beta)=&lt;mode&gt;</code> flag,
respectively, to the <code>mutagen sync create</code> command. These modes can be specified
on a default per-session basis by including the following configuration in
<code>~/.mutagen.yml</code>:</p><pre><code>sync:
  defaults:
    scanMode: &quot;&lt;mode&gt;&quot;
</code></pre><p>It&rsquo;s worth noting that even in cases where <code>accelerated</code> scanning returns a
slightly outdated synchronization root snapshot, Mutagen&rsquo;s change application
algorithms will still detect conflicting changes that might have been missed in
the outdated snapshot, so the safety behavior is the same as with <code>full</code>
scanning.</p></div></div></div></div><footer class="mt-auto bg-light py-4"><div class=container><div class=row><div class="col-md-4 my-3"><strong class=text-dark>© 2016 – 2019 Mutagen IO, Inc.</strong><br><span class=text-muted>All rights reserved.</span><br><strong><a class=text-info href=mailto:hello@mutagen.io>hello@mutagen.io</a></strong></div><div class=col-md-8><div class=row><div class="col-md-4 my-3"><h6 class=text-dark>Resources</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-secondary" href=/documentation>Documentation</a></li><li class=nav-item><a class="nav-link px-0 text-secondary" href=https://groups.google.com/forum/#!forum/mutagen-announce>Announcements</a></li><li class=nav-item><a class="nav-link px-0 text-secondary" href=https://github.com/mutagen-io/mutagen/blob/master/SECURITY.md>Security</a></li></ul></div><div class="col-md-4 my-3"><h6 class=text-dark>Legal</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-secondary" href=/legal/licenses>Licenses</a></li><li class=nav-item><a class="nav-link px-0 text-secondary" href=/legal/third-party-trademarks>Third-party trademarks</a></li></ul></div><div class="col-md-4 my-3"><h6 class=text-dark>Links</h6><ul class="nav flex-column"><li class=nav-item><a class="nav-link px-0 text-secondary" href=https://twitter.com/mutagen_io>Twitter</a></li><li class=nav-item><a class="nav-link px-0 text-secondary" href=https://spectrum.chat/mutagen>Spectrum</a></li><li class=nav-item><a class="nav-link px-0 text-secondary" href=https://github.com/mutagen-io/mutagen>GitHub</a></li><li class=nav-item><a class="nav-link px-0 text-secondary" href=#>Top of page ▲</a></li></ul></div></div></div></div></div></footer></body></html>